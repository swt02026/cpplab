c++ mangling

nested function

race condition
